<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="file" name="csTimer" id="csTimer">
    <select name="" id="sessions" aria-placeholder="Select Session">
        <option value="none">Select Session</option>
    </select>
    <div id="chart"></div>
    <script src="./d3.min.js"></script>
    <script src="./script.js" type="module"></script>
    <script>
        let file = document.getElementById('csTimer');
        file.addEventListener('change', function() {

            let fr = new FileReader();
            fr.onload = function() {
                let json = JSON.parse(fr.result);
                let sessions = Object.keys(json);
                updateSelect(sessions)
                console.log(json);
            }
              
            fr.readAsText(this.files[0]);
        });

        function updateSelect(keys) {
            console.log('keys', keys)
            let select = document.getElementById('sessions');
            for (let key of keys) {
                let opt = document.createElement('option');
                opt.val = key;
                opt.innerText = key;
                select.appendChild(opt);
            }
        }
    </script>
</body>
</html>